<?xml version="1.0" encoding="utf-8"?>
<odoo>
    <template id="report_account_cash_expense_root">
        <t t-raw="0"/>
    </template>

    <template id="report_account_hr_expense">
        <t t-call="web.html_container">
            <t t-foreach="docs" t-as="o">
                <t t-call="ev_account_erpviet.report_account_cash_expense_root">
                    <div class="page">
                        <table align="center" border="0" cellpadding="1" cellspacing="1" style="width:100%;">
                            <tbody>
                                <tr>
                                    <td style="width: 50%;">
                                        <p>
                                            Đơn vị:
                                            <span t-field="o.company_id.name"/>
                                        </p>
                                        <p>
                                            Địa chỉ:
                                            <t t-if="o.company_id.partner_id.street">
                                                <t t-esc="o.company_id.partner_id.street"/>
                                            </t>
                                            <t t-if="o.company_id.partner_id.city">,
                                                <t t-esc="o.company_id.partner_id.city"/>
                                            </t>
                                            <t t-if="not o.company_id.partner_id.city and o.company_id.partner_id.state_id">
                                                ,
                                                <t t-esc="o.company_id.partner_id.state_id.name"/>
                                            </t>
                                            <t t-if="o.company_id.partner_id.country_id">,
                                                <t t-esc="o.company_id.partner_id.country_id.name"/>
                                            </t>
                                        </p>
                                    </td>
                                    <td style="width: 50%;">
                                        <p style="text-align: center;">
                                            Mẫu số 02 - TT
                                        </p>
                                        <p style="text-align: center;">(Ban hành theo TT số 200/2014/QĐ-BTC<br/>ngày
                                            22/12/2014 của Bộ trưởng Bộ Tài Chính)
                                        </p>
                                    </td>
                                </tr>
                            </tbody>
                        </table>

                        <table align="center" border="0" cellpadding="1" cellspacing="1" style="width:100%;">
                            <tbody>
                                <tr>
                                    <td style="text-align: center;">
                                        <p>
                                            <span style="font-size:25px;">
                                                <strong>
                                                    PHIẾU CHI
                                                </strong>
                                            </span>
                                            <span style="float:right">
                                                Quyển sổ:........
                                            </span>
                                        </p>

                                        <p style="text-align: center;">
                                            <em>Ngày
                                                <span t-esc="o.write_date.day"/>
                                                tháng
                                                <span t-esc="o.write_date.month"/>
                                                năm
                                                <span t-esc="o.write_date.year"/>
                                            </em>
                                            <span style="text-aligh: center; float:right" t-field="o.code">
                                            </span>
                                        </p>
                                    </td>
                                </tr>
                            </tbody>
                        </table>

                        <table border="0" cellpadding="1" cellspacing="1" style="width:100%;">
                            <tbody>
                                <tr>
                                    <td style="width: 25%;"/>
                                    <td style="width: 25%;"/>
                                    <td style="width:25%;"/>
                                    <td style="width: 25%;">
                                        <table border="0" cellpadding="1" cellspacing="1"
                                               style="width:100%;">
                                            <tbody>
                                                <tr style="text-align:left; vertical-align:top; width:40px">
                                                    <td style="width:25%">
                                                        <p style="float:right">Nợ:
                                                            <t t-foreach="o.expense_line_ids" t-as="line"
                                                               style="text-align:left; vertical-align:top; width:40px">
                                                                <span t-field="line.account_id.code"/>;
                                                            </t>
                                                        </p>
                                                    </td>
                                                </tr>
                                                <tr style="text-align:left; vertical-align:top; width:40px">
                                                    <td style="width:25%">
                                                        <p style="float:right">Có:
                                                            <t t-if="o.bank_journal_id.default_debit_account_id">
                                                                <span t-field="o.bank_journal_id.default_debit_account_id.code"/>
                                                            </t>
                                                        </p>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                    </td>
                                </tr>
                            </tbody>
                        </table>

                        <table align="center" border="0" cellpadding="1" cellspacing="1"
                               style="width:100%;">
                            <tbody>
                                <tr>
                                    <td>
                                        <p style="">
                                            Họ và tên người nhận tiền:
                                            <span t-field="o.employee_id.name"/>
                                        </p>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <p style="">Địa chỉ:
                                            <t t-if="o.company_id.partner_id">
                                                <t t-if="o.company_id.partner_id.street">
                                                    <t t-esc="o.company_id.partner_id.street"/>
                                                </t>
                                                <t t-if="o.company_id.partner_id.city">,
                                                    <t t-esc="o.company_id.partner_id.city"/>
                                                </t>
                                                <t t-if="not o.company_id.partner_id.city and o.company_id.partner_id.state_id">
                                                    ,
                                                    <t t-esc="o.company_id.partner_id.state_id.name"/>
                                                </t>
                                                <t t-if="o.company_id.partner_id.country_id">,
                                                    <t t-esc="o.company_id.partner_id.country_id.name"/>
                                                </t>
                                            </t>
                                            <t t-if="not o.company_id.partner_id">
                                                <t t-if="o.employee_id.address_home_id">
                                                    <t t-esc="o.employee_id.address_home_id"/>
                                                </t>
                                            </t>
                                        </p>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <p style="">
                                            Lý do chi:
                                        </p>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <t t-set="amount_words" t-value="o.get_amount_word()"/>
                                        <p style="">Số tiền:
                                            <strong>
                                                <t t-esc="'{:,.0f}'.format(o.x_amount).replace(',', '.')"/>
                                                <t t-esc="o.currency_id.name"/>
                                            </strong>
                                        </p>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <p style="">Viết bằng chữ:
                                            <t t-esc="amount_words"/>
                                        </p>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <p style="">Kèm theo: .......... chứng từ gốc</p>
                                    </td>
                                </tr>
                                <tr>
                                    <td style="text-align: right;">
                                        <p>
                                            Ngày
                                            <span t-esc="o.write_date.day"/>
                                            tháng
                                            <span t-esc="o.write_date.month"/>
                                            năm
                                            <span t-esc="o.write_date.year"/>
                                        </p>
                                    </td>
                                </tr>
                                <tr>
                                    <td>
                                        <table align="center" border="0" cellpadding="1" cellspacing="1"
                                               style="width:100%;">
                                            <tbody>
                                                <tr>
                                                    <td style="text-align: center; vertical-align:top; width: 20%;">
                                                        <p style="">
                                                            <strong>Giám đốc</strong>
                                                        </p>
                                                        <p style="">
                                                            <em>
                                                                <span style="text-align: center;">(Ký, họ tên, đóng
                                                                    dấu)
                                                                </span>
                                                            </em>
                                                        </p>
                                                    </td>
                                                    <td style="text-align: center; vertical-align:top; width: 20%;">
                                                        <p style="">
                                                            <strong>Kế toán trưởng</strong>
                                                        </p>
                                                        <p style="">
                                                            <em>
                                                                <span style="text-align: center;">(Ký, họ tên)</span>
                                                            </em>
                                                        </p>
                                                    </td>

                                                    <td style="text-align: center; vertical-align:top; width: 20%;">
                                                        <p style="">
                                                            <strong>Thủ quỹ</strong>
                                                        </p>

                                                        <p style="">
                                                            <em>(Ký, họ tên)</em>
                                                        </p>
                                                    </td>
                                                    <td style="text-align: center; vertical-align:top; width: 20%;">
                                                        <p style="">
                                                            <strong>Người lập phiếu</strong>

                                                        </p>

                                                        <p style="">
                                                            <em>
                                                                <span style="text-align: center;">(Ký, họ tên)</span>
                                                            </em>
                                                            <p style="height: 70px"/>
                                                            <span style="" t-esc="o.create_uid.name"/>
                                                        </p>
                                                    </td>
                                                    <td style="text-align: center; vertical-align:top; width: 20%;">
                                                        <p style="">
                                                            <strong>Người nhận tiền</strong>

                                                        </p>

                                                        <p style="">
                                                            <em>
                                                                <span style="text-align: center;">(Ký, họ tên)</span>
                                                            </em>
                                                            <p style="height: 70px"/>
                                                            <span style="" t-esc="o.employee_id.name"/>
                                                        </p>
                                                    </td>
                                                </tr>
                                            </tbody>
                                        </table>
                                        <p style="">Đã nhận đủ số tiền (viết bằng chữ):
                                            <t t-esc="amount_words"/>
                                        </p>
                                        <p style="">+ Tỉ giá ngoại tệ (vàng bạc, đá quý):</p>
                                        <p style="">+ Số tiền quy đổi:</p>
                                    </td>
                                </tr>
                            </tbody>
                        </table>
                    </div>
                    <style>
                        p {margin:0;}
                    </style>
                </t>
            </t>
        </t>
    </template>

    <record id="paperformat_custom_no_margin" model="report.paperformat">
        <field name="name">Custom A4 without borders</field>
        <field name="default" eval="False"/>
        <field name="format">A4</field>
        <field name="orientation">Portrait</field>
        <field name="margin_top">10</field>
        <field name="margin_bottom">5</field>
        <field name="margin_left">25</field>
        <field name="margin_right">25</field>
        <field name="header_line" eval="False"/>
        <field name="header_spacing">0</field>
    </record>

    <report
            id="action_report_hr_expense"
            string="Expence Report"
            model="hr.expense.sheet"
            report_type="qweb-pdf"
            name="ev_account_erpviet.report_account_hr_expense"
            file="ev_account_erpviet.report_account_hr_expense"
            print_report_name="'Income - %s - %s' % (object.employee_id.name, (object.name).replace('/', ''))"
            paperformat="paperformat_custom_no_margin"
    />

</odoo>
